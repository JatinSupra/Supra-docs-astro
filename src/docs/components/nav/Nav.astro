---
// icons
import Menu from "@tabler/icons/outline/menu-2.svg";

import DocsLogo from "@/docs/components/docs-logo/DocsLogo.astro";
import LanguageSelect from "@/docs/components/language-select/LanguageSelect.astro";
import MobileLanguageSelect from "@/docs/components/language-select/MobileLanguageSelect.astro";
import NavLink from "@/docs/components/nav/NavLink.astro";
import SidebarNav from "@/docs/components/nav/SidebarNav.astro";
import SocialIconNav from "@/docs/components/social/SocialIconNav.astro";
import ThemeToggle from "@/docs/components/theme-toggle/ThemeToggle.astro";
import { locales } from "@/docs/config/siteSettings.json";
import { getLocaleFromUrl } from "@/docs/js/localeUtils";
import { getLocalizedRoute } from "@/docs/js/translationUtils";
import { getTranslatedData } from "@/docs/js/translationUtils";

import { Dialog, DialogContent, DialogTrigger } from "./nav-dialog";

interface Props {
  tabId?: string;
}

const { tabId = "main" } = Astro.props;
const currLocale = getLocaleFromUrl(Astro.url);
const navData = getTranslatedData("navData", currLocale);
const siteData = getTranslatedData("siteData", currLocale);
---

<div class="flex h-(--nav-height) items-center px-4">
  {/* Rest of the navbar */}
  <nav class="flex flex-1 items-center justify-between">
    <div class="ml-1 flex items-center space-x-6">
      <DocsLogo />
    </div>
    <div class="flex items-center">
      <div class="hidden lg:flex">
        <ul class="hidden items-center space-x-3 md:flex">
          {
            navData.map((navItem) => (
              <li>
                <NavLink {navItem} class="px-2" />
              </li>
            ))
          }
        </ul>

        <div class="bg-border mx-6 h-8 w-px"></div>
      </div>
        <ThemeToggle class="hidden md:flex" size="md" />

        {locales.length > 1 && <LanguageSelect class="ml-1 hidden md:flex" />}
      </div>
    </div>
  </nav>
  {/* Mobile Sidebar Dialog */}
  <Dialog>
    <DialogTrigger aria-label="Toggle Menu" class="docs-nav__link--base mr-1 p-1.5 md:hidden">
      <Menu class="size-6" />
    </DialogTrigger>
    <DialogContent
      animationDuration={300}
      class="h-[calc(100vh-var(--nav-height))-1px] rounded-none"
    >
      <div class="overflow-x-hidden overflow-y-auto">
        <SidebarNav tabId={tabId}>
          <div slot="after-links" class="flex justify-between">
            <ThemeToggle />
            {locales.length > 1 && <MobileLanguageSelect />}
          </div>
        </SidebarNav>
      </div>
    </DialogContent>
  </Dialog>
</div>